#naemon install script Centos7
useradd -r naemon
yes | yum group install "Development Tools"
yes | yum install glib2-devel help2man gperf wget
cd /tmp/
wget https://github.com/naemon/naemon-core/archive/v1.3.1.tar.gz
tar xfv v1.3.1.tar.gz
cd naemon-core-1.3.1/
./autogen.sh --prefix=/opt/naemon --with-naemon-user=naemon --with-naemon-group=naemon --with-pluginsdir=/usr/lib64/nagios/plugins
make all
yes | make install
mkdir -p /opt/naemon/var/
mkdir -p /opt/naemon/var/cache/naemon
mkdir -p /opt/naemon/var/spool/checkresults
chown naemon:naemon /opt/naemon/var -R
mkdir /opt/naemon/etc/naemon/module-conf.d
chown naemon:naemon /opt/naemon/etc -R
cat <<EOF >/lib/systemd/system/naemon.service
[Unit]
Description=Naemon Monitoring Daemon
Documentation=http://naemon.org/documentation
After=network.target

[Service]
Type=forking
PIDFile=/opt/naemon/var/cache/naemon/naemon.pid
ExecStartPre=/opt/naemon/bin/naemon --verify-config /opt/naemon/etc/naemon/naemon.cfg
ExecStart=/opt/naemon/bin/naemon --daemon /opt/naemon/etc/naemon/naemon.cfg
ExecReload=/bin/kill -HUP $MAINPID
User=naemon
Group=naemon
StandardOutput=journal
StandardError=inherit

[Install]
WantedBy=multi-user.target
EOF
systemctl daemon-reload
systemctl start naemon
systemctl enable naemon.service
yum install nagios-plugins-all
systemctl restart naemon
